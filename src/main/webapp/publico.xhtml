<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:c="http://java.sun.com/jsp/jstl/core" 
      >

    <h:head>


        <h:outputStylesheet name="css/publico.css" />
        <h:outputStylesheet name="dataTable/css/dataTables.bootstrap.min.css" />	
        <h:outputStylesheet name="dataTable/css/jquery.dataTables.min.css" />


        <style type="text/css">
            .value {
                font-weight: bold;
            }

            .panel-default > .panel-heading {
                color: white;
                background-color: rgba(0,0,0,0.7);
                border-color: transparent;
            }

            .panel {
                margin-bottom: 20px;
                background-color: rgba(204, 181, 181, 0);
                border: 1px solid rgba(0, 0, 0, .5);
                border-radius: 4px;
                -webkit-box-shadow: 0 1px 1px rgba(0, 0, 0, .05);
                box-shadow: 0 1px 1px rgba(0, 0, 0, .05);
            }
            table.dataTable thead {
                background-color:rgba(144, 22, 38, 0.7);
                color:white;
                border-radius: 1px;
            }
            .pagination>.active>a, .pagination>.active>a:focus, .pagination>.active>a:hover, .pagination>.active>span, .pagination>.active>span:focus, .pagination>.active>span:hover {
                z-index: 3;
                color: #fff;
                cursor: default;
                background-color: #900;
                border-color: transparent;
            }

            .pagination>.disabled>a, .pagination>.disabled>a:focus, .pagination>.disabled>a:hover, .pagination>.disabled>span, .pagination>.disabled>span:focus, .pagination>.disabled>span:hover {
                color: white;
                cursor: not-allowed;
                background-color: rgba(64, 76, 79, 0.76);
                border-color: transparent;

            }


        </style>

    </h:head>


    <h:body
        style="background-image:url(resources/images/publico.jpg);background-size:cover;background-repeat: no-repeat;">
        <f:metadata>
            <f:viewParam name="correo" value="#{usuarioBean.correo}" />
        </f:metadata>

        <p:inputText id="nom" binding="#{nom}"
                     value="#{usuarioBean.getUsuario().getNombre()}" style="display:none" />
        <p:inputText id="nomi" binding="#{nomi}"
                     value="#{usuarioBean.getUsuario().getTipo()}" style="display:none" />
        <nav class="navbar navbar-default" style="height:8px">
            <div class="container-fluid">
                <!-- Collect the nav links, forms, and other content for toggling -->
                <div class="collapse navbar-collapse"
                     id="bs-example-navbar-collapse-1">
                    <ul class="nav navbar-nav">
                        <h:panelGrid columns="1"
                                     style="
                                     text-align:center;
                                     margin: 1% auto;
                                     height:5px;">
                            <h:outputText value="#{nom.value}"
                                          style=" font-size: 20px;
                                          color : rgba(255, 255, 255, 1);
                                          " />

                            <h:outputText value="#{nomi.value}"
                                          style=" font-size: 15px;
                                          color : rgba(255, 255, 255, 1);
                                          " />
                        </h:panelGrid>
                    </ul>

                    <ul class="nav navbar-nav navbar-right">
                        <li><a href="index.xhtml" style="font-size: 1.5rem"><span
                                    class="glyphicon glyphicon-log-in"></span> Salir</a></li>
                    </ul>
                </div>
            </div>
        </nav>


        <!--<h:form id="initiativeByKeywords_form">
            <h:outputText id="input" value="#{buttonText}"/>
            
            <p:commandButton id="botonComentario" value = "Buscar" action="#{iniciativaBean.setInput(buttonText.value)}" ></p:commandButton>
        </h:form>-->



        <div class="container">
            <div class="row">

                <div class="col-xs-6">



                    <ul class="nav nav-tabs"  style="width: 100%">
                        <li class="active">
                            <a  href="#1" data-toggle="tab">Comentarios</a>
                        </li>
                        <li><a href="#2" data-toggle="tab">Comentar</a>
                        </li> 

                    </ul>
                    <p></p>
                    
                    <div class="tab-content ">
       
                        <div class="tab-pane active" id="1">
                            <h:panelGroup id="comentariosPanel">                               
                                <table id="comentarios"  class="table table-striped table-bordered" style="width:100%">
                                    <thead>
                                        <tr>
                                            <th>Nombre</th>
                                            <th>Comentarios</th>
                                            <th>Fechas</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <ui:repeat value ="#{iniciativaBean.getComentarios()}" var="com">
                                            <tr>
                                                <td>#{com.autor.nombre}</td>                                              
                                                <td>#{com.contenido}</td> 
                                                <td>#{com.fecha}</td>
                                            </tr>
                                        </ui:repeat>
                                    </tbody>
                                    
                                </table>
                                <h:outputScript name = "dataTable/js/jquery.dataTables.min.js" />
                                <h:outputScript name = "dataTable/js/dataTables.bootstrap.min.js" />
                                <h:outputScript name = "js/tableRefresh.js" />
                              
                               
                            </h:panelGroup>
                            
                          
                        </div>
                        
                        <div class="tab-pane " id="2">
                            <h:form  prependId="false" >
                                <h:panelGrid columns="1" style="
                                             margin: 15% auto;
                                             width:75%;height:5px;
                                             background-color: rgba(0,0,0,0.7);
                                             border-radius: 11px;text-align:center" >
                                    <p></p>
                                    
                                    
                                    <center>
                                        
                                        <label for="exampleFormControlTextarea1" style="color:white;">Registra tu comentario</label>
                                        <textarea class="form-control" id="exampleFormControlTextarea1" rows="3"
                                               style="border-radius: 11px;
                                                 background-color: rgba(255, 237, 246, 0.3);
                                                 border: rgba(255, 237, 246, 0.3);
                                                 color: white;
                                                 text-align:center;
                                                 width:80%"
                                               ></textarea>
                                    </center>
                                    <p></p>
                                    <p:separator style="width:350px;height:0px" />
                                    <p:commandButton value = "Comentar" style="
                                                     border-radius: 11px;
                                                     background-color: rgba(144, 22, 38, 0.7);
                                                     border: rgba(144, 22, 38, 0.7);
                                                     text-align:center;
                                                     top: -10px;
                                                     left: 2px;
                                                     right: -42px;
                                                     bottom: -10px;
                                                     color : rgba(255, 255, 255, 1)
                                                     "
                                                    
                                                     >
                                    </p:commandButton>
                                </h:panelGrid>
                            </h:form>
                        </div>
                    </div>
                </div>

                <div class="col-xs-6" style="background-color:transparent;">
                    <table id="iniciativas" class="table table-striped table-bordered" style="width:100%">
                        <thead>
                            <tr>
                                <th>Nombre</th>
                                <th>Proponente</th>
                                <th>Estado</th>    
                                <th>fechas</th>
                                <th>Descripcion</th>
                                <th>Comentarios</th>
                            </tr>

                        </thead>
                        <tbody>

                            <ui:repeat value ="#{iniciativaBean.inivs()}" var="ini">
                                <tr id="#{ini.getNombreUnido()}">
                                    <td>#{ini.nombre}</td>
                                    <td>#{ini.proponente.nombre}</td>
                                    <td>#{ini.estado}</td>
                                    <td>#{ini.fechaPropuesta}</td>      
                                    <td>#{ini.descripcion}</td>
                                    <td>
                                        
                                        <p:commandButton value="Comentarios" actionListener="#{iniciativaBean.setInput(ini.getNombreUnido())}" style="
                                                     border-radius: 11px;
                                                     background-color: rgba(144, 22, 38, 0.7);
                                                     border: rgba(144, 22, 38, 0.7);
                                                     text-align:center;
                                                     bottom: -10px;
                                                     color : rgba(255, 255, 255, 1)
                                                     " update =  ":comentariosPanel"
                                          ></p:commandButton>
                                    </td>
                                </tr>
                            </ui:repeat>


                        </tbody>
                    </table>
                </div>
            </div>			
        </div>
        
        
        <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>       
        <h:outputStylesheet name="bootstrap-3.3.7-dist/css/bootstrap.min.css" />
        <h:outputScript name="dataTable/js/jquery.dataTables.min.js" />
        <h:outputScript name="dataTable/js/dataTables.bootstrap.min.js" />
        <h:outputScript name="js/load.js"></h:outputScript>
    </h:body>
</html>