<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:c="http://java.sun.com/jsp/jstl/core">

<h:head>


	<h:outputStylesheet name="css/publico.css" />
	<h:outputStylesheet name="dataTable/css/dataTables.bootstrap.min.css" />
	<h:outputStylesheet name="dataTable/css/jquery.dataTables.min.css" />


	<style type="text/css">
.value {
	font-weight: bold;
}

.panel-default>.panel-heading {
	color: white;
	background-color: rgba(0, 0, 0, 0.7);
	border-color: transparent;
}

.panel {
	margin-bottom: 20px;
	background-color: rgba(204, 181, 181, 0);
	border: 1px solid rgba(0, 0, 0, .5);
	border-radius: 4px;
	-webkit-box-shadow: 0 1px 1px rgba(0, 0, 0, .05);
	box-shadow: 0 1px 1px rgba(0, 0, 0, .05);
}

table.dataTable thead {
	background-color: rgba(144, 22, 38, 0.7);
	color: white;
	border-radius: 1px;
}

.pagination>.active>a, .pagination>.active>a:focus, .pagination>.active>a:hover,
	.pagination>.active>span, .pagination>.active>span:focus, .pagination>.active>span:hover
	{
	z-index: 3;
	color: #fff;
	cursor: default;
	background-color: #900;
	border-color: transparent;
}

.pagination>.disabled>a, .pagination>.disabled>a:focus, .pagination>.disabled>a:hover,
	.pagination>.disabled>span, .pagination>.disabled>span:focus,
	.pagination>.disabled>span:hover {
	color: white;
	cursor: not-allowed;
	background-color: rgba(64, 76, 79, 0.76);
	border-color: transparent;
}
</style>

</h:head>


<h:body
	style="background-image:url(resources/images/publico.jpg);background-size:cover;background-repeat: no-repeat;">
	<f:metadata>
		<f:viewParam name="correo" value="#{publicoBean.correo}" />
	</f:metadata>

	<p:inputText id="nom" binding="#{nom}"
		value="#{publicoBean.usr.nombre}" style="display:none" />
	<p:inputText id="nomi" binding="#{nomi}"
		value="#{publicoBean.usr.tipo}" style="display:none" />
	<nav class="navbar navbar-default" style="height:8px">
	<div class="container-fluid">
		<!-- Collect the nav links, forms, and other content for toggling -->
		<div class="collapse navbar-collapse"
			id="bs-example-navbar-collapse-1">
			<ul class="nav navbar-nav">
				<h:panelGrid columns="1"
					style="
                                     text-align:center;
                                     margin: 1% auto;
                                     height:5px;">
					<h:outputText value="#{nom.value}"
						style=" font-size: 20px;
                                          color : rgba(255, 255, 255, 1);
                                          " />

					<h:outputText value="#{nomi.value}"
						style=" font-size: 15px;
                                          color : rgba(255, 255, 255, 1);
                                          " />
				</h:panelGrid>
			</ul>

			<ul class="nav navbar-nav navbar-right">
				<li><a href="index.xhtml" style="font-size: 1.5rem"><span
						class="glyphicon glyphicon-log-in"></span> Salir</a></li>
			</ul>
		</div>
	</div>
	</nav>



	<div class="container">
		<div class="row">


			<div class="col-xs-6">
				<h:form prependId="false">
					<h:panelGroup id="comentariosPanel">

						<table id="comentarios" class="table table-striped table-bordered"
							style="width: 100%">
							<thead>
								<tr>
									<th>Nombre</th>
									<th>Comentarios</th>
									<th>Fechas</th>
								</tr>
							</thead>
							<tbody>
								<ui:repeat value="#{publicoBean.getComentarios()}" var="com">
									<tr>
										<td>#{com.autor.nombre}</td>
										<td>#{com.contenido}</td>
										<td>#{com.fecha}</td>
									</tr>
								</ui:repeat>
							</tbody>


						</table>
						<p:inputText id="email" binding="#{correoTmp}"
							value="#{publicoBean.correo}" style="display: none" />
						<p:inputText id="inputTmp" binding="#{inputTmp}"
							value="#{publicoBean.input}" style="display: none" />

						<button type="button" class="btn btn-primary" data-toggle="modal"
							data-target="#exampleModal">Comentar</button>
						<h:outputScript name="dataTable/js/jquery.dataTables.min.js" />
						<h:outputScript name="dataTable/js/dataTables.bootstrap.min.js" />
						<h:outputScript name="js/tableRefresh.js" />
					</h:panelGroup>

					<div class="modal fade" id="exampleModal" tabindex="-1"
						role="dialog" aria-labelledby="exampleModalLabel"
						aria-hidden="true">
						<div class="modal-dialog" role="document">
							<div class="modal-content"
								style="background-color: rgba(0, 0, 0, 0.7); border-radius: 11px; color: white">
								<div class="modal-header">

									<center>
										<h:outputText value="Registrar comentario"
											style=" font-size: 2.5em;
                              color : rgba(255, 255, 255, 1);

                              " />
									</center>
									<button type="button" class="close" data-dismiss="modal"
										aria-label="Close">
										<span aria-hidden="true">&times;</span>
									</button>
								</div>
								<div class="modal-body">
									<form>


										<div class="form-group">


											<p:inputTextarea rows="6" cols="33" id="message-text"
												binding="#{comentarioTexto}"
												style="color:white; border-radius: 11px;
		                             								background-color: rgba(255, 237, 246, 0.3);
		                             border: rgba(255, 237, 246, 0.3);
		                             width:100%" />
											<p></p>
										</div>
									</form>
								</div>
								<div class="modal-footer">
									<button type="button" class="btn btn-secondary"
										data-dismiss="modal">Cerrar</button>
									<p:commandButton value="Comentar"
										style="
                                 background-color: rgba(144, 22, 38, 0.7);
                                 border: rgba(144, 22, 38, 0.7);
                                 text-align:center;
                                 top: -10px;
                                 left: 2px;
                                 right: -42px;
                                 bottom: -10px;
                                 color : rgba(255, 255, 255, 1)
                                 "
										actionListener="#{publicoBean.registrarComentario(comentarioTexto.value,correoTmp.value)}">
									</p:commandButton>
								</div>
							</div>
						</div>
					</div>










				</h:form>


			</div>

			<div class="col-xs-6" style="background-color: transparent;">
				<table id="iniciativas" class="table table-striped table-bordered"
					style="width: 100%">
					<thead>
						<tr>
							<th>Nombre</th>
							<th>Proponente</th>
							<th>Estado</th>
							<th>fechas</th>
							<th>Descripcion</th>
							<th>Comentarios</th>
						</tr>

					</thead>
					<tbody>

						<ui:repeat value="#{iniciativaBean.inivs()}" var="ini">
							<tr id="#{ini.getNombreUnido()}">

								<td>#{ini.nombre}</td>
								<td>#{ini.proponente.nombre}</td>
								<td>#{ini.estado}</td>
								<td>#{ini.fechaPropuesta}</td>
								<td>#{ini.descripcion}</td>
								<td><p:commandButton value="Comentarios"
										action="#{publicoBean.setInput(ini.nombre())}"
										style="
                                                         border-radius: 11px;
                                                         background-color: rgba(144, 22, 38, 0.7);
                                                         border: rgba(144, 22, 38, 0.7);
                                                         text-align:center;
                                                         bottom: -10px;
                                                         color : rgba(255, 255, 255, 1)
                                                         "
										update=":comentariosPanel">

										<f:param name="correo" value="#{publicoBean.correo}" />


									</p:commandButton></td>
							</tr>
						</ui:repeat>


					</tbody>
				</table>
			</div>
		</div>

	<div>
        <input type="checkbox" name="switch" id="switch" value="1" data-on-text="ON" data-off-text="OFF" />
    </div>


	</div>


	<script
		src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
	<h:outputStylesheet name="bootstrap-3.3.7-dist/css/bootstrap.min.css" />
	<h:outputScript name="dataTable/js/jquery.dataTables.min.js" />
	<h:outputScript name="dataTable/js/dataTables.bootstrap.min.js" />
	<h:outputScript name="js/load.js"></h:outputScript>
</h:body>
</html>
